function setOptionPanel(){function e(){let e=window.localStorage.getItem("osugamesettings");if(e){let t=JSON.parse(e);t&&Object.assign(gamesettings,t)}}function t(){window.localStorage.setItem("osugamesettings",JSON.stringify(window.gamesettings))}let n={dim:60,blur:0,cursorsize:1,showhwmouse:!1,snakein:!0,snakeout:!0,autofullscreen:!1,disableWheel:!1,disableButton:!1,K1name:"Z",K2name:"X",Kpausename:"SPACE",Kpause2name:"ESC",K1keycode:90,K2keycode:88,Kpausekeycode:32,Kpause2keycode:27,mastervolume:60,effectvolume:100,musicvolume:100,audiooffset:0,beatmapHitsound:!0,easy:!1,daycore:!1,hardrock:!1,nightcore:!1,hidden:!1,autoplay:!1,relax:!1,autopilot:!1,hideNumbers:!1,hideGreat:!1,hideFollowPoints:!1};function o(e,t){gamesettings[t]==n[t]?e.parentElement.parentElement.parentElement.classList.remove("non-default"):e.parentElement.parentElement.parentElement.classList.add("non-default")}function s(e,n){let s=document.getElementById(e);s.checked=gamesettings[n],gamesettings.restoreCallbacks.push(function(){s.checked=gamesettings[n],o(s,n)}),o(s,n),s.onclick=function(){gamesettings[n]=s.checked,o(s,n),gamesettings.loadToGame(),t()}}function a(e,n,s,a){let i=document.getElementById(e),c=document.getElementById(s);i.checked=gamesettings[n],c.checked=gamesettings[a],gamesettings.restoreCallbacks.push(function(){i.checked=gamesettings[n],c.checked=gamesettings[a],o(i,n),o(c,a)}),o(i,n),o(c,a),i.onclick=function(){gamesettings[n]=i.checked,gamesettings[a]=!1,c.checked=!1,gamesettings.loadToGame(),t(),o(i,n),o(c,a)},c.onclick=function(){gamesettings[a]=c.checked,gamesettings[n]=!1,i.checked=!1,gamesettings.loadToGame(),t(),o(i,n),o(c,a)}}function i(e,n,s){let a=document.getElementById(e),i=document.getElementById(e+"-indicator");a.onmousedown=function(){i.removeAttribute("hidden")},a.onmouseup=function(){i.setAttribute("hidden","")},a.oninput=function(){let e=parseFloat(a.min),t=parseFloat(a.max),c=parseFloat(a.value),d=(c-e)/(t-e),m=a.clientWidth-20;i.style.left=d*m+13+"px",i.innerText=s(c),gamesettings[n]=a.value,o(a,n)},a.value=gamesettings[n],gamesettings.restoreCallbacks.push(function(){a.value=gamesettings[n],o(a,n)}),a.oninput(),a.onchange=function(){gamesettings[n]=a.value,gamesettings.loadToGame(),t(),o(a,n)}}function c(e,n,s){let a=document.getElementById(e),i=function(){let e=window.onkeydown;window.onkeydown=null;let c=function(){window.onkeydown=e,a.onclick=i,a.classList.remove("using"),document.removeEventListener("keydown",d),o(a,n)},d=function(e){(e=e||window.event).stopPropagation(),gamesettings[s]=e.keyCode,gamesettings[n]=e.key.toUpperCase()," "==gamesettings[n]&&(gamesettings[n]="SPACE"),"ESCAPE"==gamesettings[n]&&(gamesettings[n]="ESC"),a.value=gamesettings[n],gamesettings.loadToGame(),t(),c()};a.classList.add("using"),document.addEventListener("keydown",d),a.onclick=c};o(a,n),a.onclick=i,a.value=gamesettings[n],gamesettings.restoreCallbacks.push(function(){a.value=gamesettings[n],o(a,n)})}window.gamesettings={},Object.assign(gamesettings,n),gamesettings.refresh=e,e(),window.gamesettings.loadToGame=function(){window.game&&(window.game.backgroundDimRate=this.dim/100,window.game.backgroundBlurRate=this.blur/100,window.game.cursorSize=parseFloat(this.cursorsize),window.game.showhwmouse=this.showhwmouse,window.game.snakein=this.snakein,window.game.snakeout=this.snakeout,window.game.autofullscreen=this.autofullscreen,window.game.allowMouseScroll=!this.disableWheel,window.game.allowMouseButton=!this.disableButton,window.game.K1keycode=this.K1keycode,window.game.K2keycode=this.K2keycode,window.game.ESCkeycode=this.Kpausekeycode,window.game.ESC2keycode=this.Kpause2keycode,window.game.masterVolume=this.mastervolume/100,window.game.effectVolume=this.effectvolume/100,window.game.musicVolume=this.musicvolume/100,window.game.beatmapHitsound=this.beatmapHitsound,window.game.globalOffset=parseFloat(this.audiooffset),window.game.easy=this.easy,window.game.daycore=this.daycore,window.game.hardrock=this.hardrock,window.game.nightcore=this.nightcore,window.game.hidden=this.hidden,window.game.autoplay=this.autoplay,window.game.relax=this.relax,window.game.autopilot=this.autopilot,window.game.hideNumbers=this.hideNumbers,window.game.hideGreat=this.hideGreat,window.game.hideFollowPoints=this.hideFollowPoints)},gamesettings.loadToGame(),document.getElementById("settings-panel")&&(gamesettings.restoreCallbacks=[],i("dim-range","dim",function(e){return e+"%"}),i("blur-range","blur",function(e){return e+"%"}),i("cursorsize-range","cursorsize",function(e){return e.toFixed(2)+"x"}),s("showhwmouse-check","showhwmouse"),s("snakein-check","snakein"),s("snakeout-check","snakeout"),s("autofullscreen-check","autofullscreen"),s("disable-wheel-check","disableWheel"),s("disable-button-check","disableButton"),c("lbutton1select","K1name","K1keycode"),c("rbutton1select","K2name","K2keycode"),c("pausebutton2select","Kpause2name","Kpause2keycode"),c("pausebuttonselect","Kpausename","Kpausekeycode"),i("mastervolume-range","mastervolume",function(e){return e+"%"}),i("effectvolume-range","effectvolume",function(e){return e+"%"}),i("musicvolume-range","musicvolume",function(e){return e+"%"}),i("audiooffset-range","audiooffset",function(e){return e+"ms"}),s("beatmap-hitsound-check","beatmapHitsound"),a("easy-check","easy","hardrock-check","hardrock"),a("daycore-check","daycore","nightcore-check","nightcore"),s("hidden-check","hidden"),s("autoplay-check","autoplay"),s("relax-check","relax"),s("autopilot-check","autopilot"),s("hidenumbers-check","hideNumbers"),s("hidegreat-check","hideGreat"),s("hidefollowpoints-check","hideFollowPoints"),document.getElementById("restoredefault-btn").onclick=function(){Object.assign(gamesettings,n);for(let e=0;e<gamesettings.restoreCallbacks.length;++e)gamesettings.restoreCallbacks[e]();gamesettings.loadToGame(),t()})}window.addEventListener("DOMContentLoaded",setOptionPanel),window.onkeydown=function(e){if(!(e.ctrlKey||e.altKey||e.metaKey)&&1==e.key.length&&" "!=e.key){document.getElementsByTagName("input")[0].focus()}};